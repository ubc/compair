<!DOCTYPE html>
<!--[if IE 9]><html ng-app = "myApp" auth-login class="ie9"><![endif]-->
<html ng-app = "myApp" auth-login>
    <head>
        <base href="/app/">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- add empty favicon.ico to prevent browser errors -->
        <link rel="icon" href="data:;base64,iVBORw0KGgo=">
        <title>ComPAIR</title>

        <!-- Javascript Libraries -->
        <!-- font awesome CDN -->
        <script src="https://use.fontawesome.com/5896577a49.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ckeditor/4.5.11/ckeditor.js"></script>

        <!-- build:prod_minify_js_libs -->
        <script src="{{ bower_js_libs }}"></script>
        <!-- endbuild -->

        <!-- Non-Bower Managed Includes -->

        <!-- ComPAIR Stylesheet -->
        <!-- build:prod_compile_minify_css -->
        <link rel="stylesheet" href="{{ compair_css }}">
        <!-- endbuild -->

        <!-- MathJax, should figure out how to bower manage this -->
        <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML&delayStartupUntil=configured"></script>

        <!-- build:prod_minify_js -->
        <script src="{{ compair_js }}"></script>
        <!-- endbuild -->

        <script type="text/javascript">
            (function() {
                angular.module('ubc.ctlt.compair.login')
                .run( ['AuthTypesEnabled', function(AuthTypesEnabled) {
                    AuthTypesEnabled.app = {{ 'true' if app_login_enabled else 'false' }};
                    AuthTypesEnabled.cas = {{ 'true' if cas_login_enabled else 'false' }};
                    AuthTypesEnabled.lti = {{ 'true' if lti_login_enabled else 'false' }};
                }]);
                angular.module('ubc.ctlt.compair.attachment')
                .run( ['FileExtensions', function(FileExtensions) {
                    FileExtensions.attachment = {{ attachment_extensions|string|safe if attachment_extensions else [] }};
                }]);
                angular.module('ubc.ctlt.compair.common.xapi')
                .run( ['$location', 'xAPISettings', function($location, xAPISettings) {
                    xAPISettings.enabled = {{ 'true' if xapi_enabled else 'false' }};
                    var baseUrl = '{{xapi_app_base_url if xapi_app_base_url else ''}}';
                    if (baseUrl == '') { baseUrl = $location.absUrl().replace("app/#"+$location.url(), ""); }
                    xAPISettings.baseUrl = baseUrl;
                }]);
            })();
        </script>
        {% if ga_tracking_id %}
            <!-- Google Analytics -->
            <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', '{{ ga_tracking_id }}', 'auto');
                ga('send', 'pageview');
            </script>
        {% endif %}
    </head>
    <body>

    <!--[if lt IE 9 ]>
    <div class="alert-warning">
        <i class="fa fa-warning"></i>
        This application only supports <strong>Internet Explorer 9 and higher</strong>. Please <a href="http://windows.microsoft.com/en-ca/internet-explorer/download-ie">upgrade your browser</a> or download <a href="https://www.mozilla.org/en-US/firefox/new/">Firefox</a>, <a href="http://www.google.com/chrome/">Chrome</a>, or <a href="https://www.apple.com/ca/safari/">Safari</a> to use instead. Thank you!
    </div>
    <![endif]-->

    <!-- Main Navbar -->
    <ng-include src="'modules/navbar/navbar-partial.html'"></ng-include>

    <!-- Toast Messages from AngularJS-Toaster -->
    <toaster-container toaster-options="{'limit': 1, 'position-class': 'toast-top-full-width-opaque'}"></toaster-container>

    <!-- Main Viewport, where all the module partials are shown -->
    <div class="container">
        <!-- ngView, should have it's own row and column css organization -->
        <div ng-view=""></div>
    </div>
    </body>
</html>
