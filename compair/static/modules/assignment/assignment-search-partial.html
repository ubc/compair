
<script src="script-assignment-search.js"></script>

<div class="users-screen">
    <div class="row">
        <h1 class="col-sm-8">Assignment EndDate</h1>
        <form class="col-sm-4 search-users text-right" role="search" ng-submit="zassignmentSubmit()" ng-show="canManageUsers && (users.length || userFilters.search)">
            <div class="form-group">
                <input class="form-control" type="date" onchange="getObject(this)" name="compare_end" placeholder="Search Date (YYYY-MM-DD)">
            </div>
        </form>
    </div>

    <!-- Here a loader is created which
        loads till response comes -->
    <div class="d-flex justify-content-center">
        <div class="spinner-border"
             role="status" id="loading">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <div>
    <table id="apiresults" class="table table-striped"></table>
    </div>


    <div class="table-responsive" ng-if="users.length">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Actions</th>
                <th>
                    <a href="" ng-click="updateTableOrderBy('displayname')">Display Name</a>
                </th>
                <th>
                    <a href="" ng-click="updateTableOrderBy('firstname')">First Name</a>
                </th>
                <th>
                    <a href="" ng-click="updateTableOrderBy('lastname')">Last Name</a>
                </th>
                <th>
                    <a href="" ng-click="updateTableOrderBy('student_number')">Student Number</a>
                </th>
                <th>
                    <a href="" ng-click="updateTableOrderBy('email')">Email</a>
                </th>
                <th>
                    <a href="" ng-click="updateTableOrderBy('system_role')">System Role</a>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="user in users">
                <td class="nowrap">
                    <a href="#/user/{{user.id}}/edit" target="_blank">Edit</a>
                    <span>&nbsp;|&nbsp;</span>
                    <a href="#/users/{{user.id}}/manage">Courses & Accounts</a>
                </td>
                <td><i class="fa fa-user"></i> {{user.displayname}}</td>
                <td>{{user.firstname}}</td>
                <td>{{user.lastname}}</td>
                <td>{{user.student_number}}</td>
                <td>{{user.email}}</td>
                <td>
                    {{ user.system_role }}
                    <!--
                    <select ng-if="user.system_role != SystemRole.sys_admin" ng-model="user.system_role"
                            ng-options="system_role as system_role for system_role in system_roles"
                            ng-change="updateUser(user)"></select>
                    <span ng-if="user.system_role == SystemRole.sys_admin">{{ user.system_role }}</span>
                    -->
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="text-center" ng-if="users.length">
        <ul uib-pagination total-items="totalNumUsers" ng-model="userFilters.page"
            max-size="10" class="pagination-sm" boundary-links="true"
            direction-links="false" items-per-page="userFilters.perPage"
            num-pages="numPages" ng-hide="numPages == 1"></ul>
    </div>

    <div ng-if="!users.length">
        <hr />
        <p ng-if="!userFilters.search">No due date not found.</p>
        <p ng-if="userFilters.search">No assignment due date found for this search. Please try another search term above.</p>
    </div>

</div>
